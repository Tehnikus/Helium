const d=document,w=document.window;function getURLVar(e){var t=[],n=String(document.location).split("?");if(n[1]){var o=n[1].split("&");for(i=0;i<o.length;i++){var a=o[i].split("=");a[0]&&a[1]&&(t[a[0]]=a[1])}return t[e]||""}return"cart"==(n=String(document.location.pathname).split("/"))[n.length-1]&&(t.route="checkout/cart"),"checkout"==n[n.length-1]&&(t.route="checkout/checkout"),t[e]||""}document.addEventListener("DOMContentLoaded",function(){let e=document.querySelector("#product-category ul.pagination");var t;e&&((t=createEl("button",{class:["primary"]},"Load more")).addEventListener("click",function(){loadMore()}),e.appendChild(t));var n=document.getElementsByClassName(".text-danger");for(let e=0;e<n.length;e++){var o=n[e].parentElement.parentElement;o&&o.classList.contains("form-group")&&o.classList.add("has-error")}currency_selector=document.querySelectorAll("#form-currency .currency-select"),0<currency_selector.length&&currency_selector.forEach(function(t){t.addEventListener("click",function(e){e.preventDefault(),input_currency=document.querySelector("#form-currency input[name='code']"),input_currency.value=t.name,document.getElementById("form-currency").submit()})}),lang_selector=document.querySelectorAll("#form-language .language-select"),0<lang_selector.length&&lang_selector.forEach(function(t){t.addEventListener("click",function(e){e.preventDefault(),input_lang=document.querySelector("#form-language input[name='code']"),input_lang.value=t.name,document.getElementById("form-language").submit()})})});var cart={add:function(e,t=null){null==t&&(qty_input=document.getElementById("input-quantity"),qty_input&&(t=qty_input.value));for(var t="product_id="+e+"&quantity="+(void 0!==t?t:1),n=document.querySelectorAll('[name^="option"]:checked'),o="",a=0;a<n.length;a++)o+="&"+n[a].name+"="+n[a].value;ajax("index.php?route=checkout/cart/add",t+=o,function(e){console.log(e),e.success&&ajax("index.php?route=common/cart/info",null,function(e){header_cart=document.getElementById("header-cart"),header_cart.innerHTML="",(t=document.createElement("div")).innerHTML=e;e=t.getElementsByClassName("cart-header-button");header_cart.appendChild(e[0]);var t=t.getElementsByClassName("modal-cart");modalToast.create("dialog",t[0])},null,null,null,"GET","text",!0)},function(){},function(){},function(e){console.log("error: ",e)},"POST","JSON",!0)},update:function(e,t){ajax("index.php?route=checkout/cart/edit","key="+e+"&quantity="+(void 0!==t?t:1),function(e){console.log(e)},null,null,null,"POST","JSON",!0)},remove:function(e){ajax("index.php?route=checkout/cart/remove","key="+e,function(e){ajax("index.php?route=common/cart/info",null,function(e){document.getElementById("cart").innerHTML=e},null,null,null,"GET","text",!0)})}},voucher={add:function(){},remove:function(e){ajax("index.php?route=checkout/cart/remove","key="+e,function(e){ajax("index.php?route=common/cart/info",null,function(e){document.getElementById("cart").innerHTML=e},null,null,null,"GET","text",!0)})}},wishlist={add:function(e){ajax("index.php?route=account/wishlist/add","product_id="+e,function(e){modalToast.create("dialog",e.success),e.redirect&&(location=json.redirect),document.querySelector("#wishlist-total span").innerText=e.total,document.querySelector("#wishlist-total span").title=e.total},null,null,null,"POST","json",!0)},remove:function(){}},compare={add:function(e){ajax("index.php?route=product/compare/add","product_id="+e,function(e){modalToast.create("dialog",e.success),document.querySelector("#compare-total").innerHTML=e.total},null,null,null,"POST","json",!0)},remove:function(){}};function sendReview(e){let t=document.getElementById("form-review");var n=new URLSearchParams(new FormData(t)).toString();ajax("index.php?route=product/product/write&product_id="+e.dataset.productId,n,function(e){e.error&&modalToast.create("toast",e.error,"error"),e.success&&(modalToast.create("toast",e.success,"success"),t.parentElement.removeChild(t))},null,null,null,"POST","JSON",!0)}function accordion(e=null,t=!1){var n=e.parentElement.querySelector(".dropdown-menu")||document.querySelector('[data-openedby="'+e.dataset.target+'"]')||e.href.split("#")[1];function o(t){["collapse","collapse-in"].forEach(function(e){t.classList.toggle(e)})}1!=t&&null!=e||[].forEach.call(document.getElementsByClassName("collapse-in"),function(e){e!==n&&o(e)}),n?o(n):console.log("Target menu not found in element",e)}function loadMore(){let e=document.querySelector("#product-category ul.pagination");var t;e&&(active_pages=e.querySelectorAll(".active"),t=active_pages[active_pages.length-1],next_page=t.nextElementSibling,next_page&&(next_href=next_page.getElementsByTagName("a")[0],!next_href||void 0===next_href.href||void 0!==next_href.attributes.rel&&"next"===next_href.attributes.rel.value?document.querySelectorAll('[rel="next"], [rel="last"]').forEach(function(e){e.classList.add("hidden")}):ajax(next_href.href,null,function(e){var t=document.createElement("div");t.innerHTML=e;var n=t.querySelectorAll(".product-layout");for(let e=0;e<n.length;e++){var o=n[e];document.querySelector(".row.product-list-grid").insertAdjacentElement("beforeend",o)}t=next_href.innerText;next_page.innerHTML="<span>"+t+"</span>",next_page.classList.add("active")},null,null,null,"GET","text",!0)))}document.addEventListener("click",function(t){if(agree_links=document.querySelectorAll(".agree"),agree_links)for(let e=0;e<agree_links.length;e++){const a=agree_links[e];a.contains(t.target)&&null!==a.href&&(t.preventDefault(),ajax(a.href,null,function(e){modalToast.create("dialog",e,"warning")},null,null,null,"GET","html",!0))}if("a"===t.target.tagName.toLowerCase()&&"-1"!=t.target.href.indexOf("review")&&(t.preventDefault(),ajax(t.target.href,null,function(e){document.getElementById("reviews").innerHTML=e},null,null,null,"GET","text",!0)),"button-cart"==t.target.id)for(var e=[],n=document.querySelectorAll("input:checked"),o=0;o<n.length;o++)e.push(n[o].value);"button-review"==t.target.id&&(t.preventDefault(),sendReview(t.target)),[].forEach.call(document.getElementsByClassName("dropdown-toggle"),function(e){!e.contains(t.target)&&e!=t.target||(console.log(e),e.classList.contains("main-menu-trigger")?accordion(e,!1):accordion(e,!0),animated_icon=e.querySelector(".nav-icon-1"),animated_icon&&animated_icon.classList.toggle("open"))})});var countdown_el=document.getElementsByClassName("price-new");if(countdown_el&&0<countdown_el.length)for(let e=0;e<countdown_el.length;e++){const Ia=countdown_el[e];if("specialDateEnd"in Ia.dataset){let e=new Date(Ia.dataset.specialDateEnd).getTime()}}function timer(e){var t=e-(new Date).getTime();let n=Math.floor(t/864e5),o=Math.floor(t%864e5/36e5),a=Math.floor(t%36e5/6e4),l=Math.floor(t%6e4/1e3);n<=9?n="0"+n:n,o<=9?o="0"+o:o,a<=9?a="0"+a:a,l<=9?l="0"+l:l,console.log(n,o,a,l),--timer<0&&(timer=e)}function fadeOut(t,e){t.style.opacity=1,function e(){(t.style.opacity-=.1)<0?(t.style.display="none",document.body.removeChild(t)):requestAnimationFrame(e)}()}function fadeIn(n,e){n.style.opacity=0,n.style.display=e||"block",function e(){var t=parseFloat(n.style.opacity);1<(t+=.1)||(n.style.opacity=t,requestAnimationFrame(e))}()}var modalToast={window:"",create:function(e="toast",t=null,n="success"){var o=createEl("div",{class:["modal_window",e,n]},null),n=createEl("button",{class:["close_modal"]},null),t=createEl("div",{class:["modal_content"]},"object"==typeof t?t.outerHTML:t);t.style.cssText="position:relative;width:100%;height: 100%;",n.addEventListener("click",function(e){modalToast.close(e)}),o.appendChild(n),o.appendChild(t),modalToast.window=o,"toast"==e&&(o.style.cssText="position:fixed;top:20px;right:20px;z-index:100",void 0!==(t=document.getElementsByClassName("toast"))[t.length-1]&&(o.style.top=t[t.length-1].offsetHeight+t[t.length-1].offsetTop+10+"px")),"dialog"==e&&((e=createEl("div",{class:["modal_backdrop"]})).style.cssText="position:fixed;zindex:99;top:0;bottom:0;right:0;left:0;width:100%;height:100%;background:rgb(51 51 51 / 52%);backdrop-filter:blur(3px)",e.addEventListener("click",function(e){modalToast.close(e)}),document.body.appendChild(e),fadeIn(e)),document.body.appendChild(modalToast.window),fadeIn(modalToast.window)},close:function(e){var n,e=e.target.closest(".modal_window");null!=e?(document.body.removeChild(e),void 0!==(n=document.getElementsByClassName("toast"))&&Array.prototype.forEach.call(n,function(e,t){e.style.top=0<t?n[t-1].offsetHeight+n[t-1].offsetTop+10+"px":"20px"})):fadeOut(document.querySelector(".dialog"));e=document.querySelector(".modal_backdrop");e&&fadeOut(e)}};function createEl(e,t,n=null){var o,a=document.createElement(e);for(o in t)if("class"==o)a.classList.add.apply(a.classList,t[o]);else if("data"==o)for(var l in t[o])a.dataset[l]=t[o][l];else if("for"==o)a.setAttribute("for",t[o]);else if("style"==o)a.setAttribute("style",t[o]);else if("options"==o)for(var r in t[o]){var c=document.createElement("option");c.textContent=r,c.value=t[o][r],""==r&&(c.selected=!0),a.insertAdjacentElement("beforeend",c)}else a[o]=t[o];return void 0!==n&&null!=n&&(a.innerHTML=n),a}let masked_inputs=["InputPhone","one_click_input","user_telephone","input-payment-telephone"];function handleInput(e){e.target.value=phoneMask(e.target.value)}function phoneMask(e){return e.replace(/\D/g,"").replace(/^(38)/,"").replace(/^(\d)/,"($1").replace(/^(\(\d{3})(\d)/,"$1) $2").replace(/(\d{3})(\d{1,5})/,"$1-$2").replace(/(-\d{4})\d+?$/,"$1")}function ajax(e,t,n=null,o=null,a=null,l=null,r,c="json",u){var i;r=void 0!==r?r:"POST",u=void 0===u||u,c=void 0!==c?c:"json",(i=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")).responseType=c.toLowerCase(),null!==o&&o(),"POST"==r?(i.open(r,e,u),i.setRequestHeader("X-Requested-With","XMLHttpRequest"),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),i.send(t)):(null!=t&&(e=e+"?"+t),i.open(r,e,u),i.setRequestHeader("X-Requested-With","XMLHttpRequest"),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),i.send(null)),i.onreadystatechange=function(){4==i.readyState&&200==i.status&&null!==n&&n(i.response),4!==i.readyState&&200!==i.status&&null!==l&&l(i.response)},i.onerror=function(){},i.ontimeout=function(){},i.onabort=function(){},null!==a&&a()}function sajax(e={}){if("object"!=typeof e)return console.log("ajax function requires object argument!"),!1;var t;(t=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")).responseType=e.responseType.toLowerCase(),null!==e.beforesend&&e.beforesend(),t.setRequestHeader("X-Requested-With","XMLHttpRequest"),t.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),"POST"==e.method?(t.open(e.method,e.url,1==e.async),t.send(e.data)):(void 0!==e.data&&null!==e.data&&(url=url+"?"+data),t.open(e.method,e.url,1==e.async),t.send(null)),t.onreadystatechange=function(){4==t.readyState&&200==t.status&&null!==success&&e.success(t.response),4!==t.readyState&&200!==t.status&&null!==error&&e.error(t.response)}}document.addEventListener("input",function(e){-1!=masked_inputs.indexOf(e.target.id)&&e.target.addEventListener("input",handleInput,!1)});